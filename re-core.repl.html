<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>re-core.repl documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/solarized-light.css" /><script type="text/javascript" src="highlight/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with <a href="https://github.com/xsc/codox-theme-rdash">RDash UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">re-core</span> <span class="project-version">0.6.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aws</span></div></div></li><li class="depth-2 branch"><a href="aws.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="aws.model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>model</span></div></a></li><li class="depth-2 branch"><a href="aws.networking.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>networking</span></div></a></li><li class="depth-2 branch"><a href="aws.provider.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>provider</span></div></a></li><li class="depth-2 branch"><a href="aws.validations.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validations</span></div></a></li><li class="depth-2"><a href="aws.volumes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>volumes</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>components</span></div></div></li><li class="depth-2"><a href="components.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>digital</span></div></div></li><li class="depth-2 branch"><a href="digital.provider.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>provider</span></div></a></li><li class="depth-2"><a href="digital.validations.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validations</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>es</span></div></div></li><li class="depth-2 branch"><a href="es.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="es.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="es.history.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>history</span></div></a></li><li class="depth-2 branch"><a href="es.jobs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jobs</span></div></a></li><li class="depth-2 branch"><a href="es.systems.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>systems</span></div></a></li><li class="depth-2"><a href="es.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -207px;"><span class="top" style="height: 216px;"></span><span class="bottom"></span></span><span>hypervisors</span></div></div></li><li class="depth-2"><a href="hypervisors.networking.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>networking</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>kvm</span></div></div></li><li class="depth-2 branch"><a href="kvm.clone.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clone</span></div></a></li><li class="depth-2 branch"><a href="kvm.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="kvm.networking.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>networking</span></div></a></li><li class="depth-2 branch"><a href="kvm.provider.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>provider</span></div></a></li><li class="depth-2 branch"><a href="kvm.spice.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spice</span></div></a></li><li class="depth-2 branch"><a href="kvm.validations.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validations</span></div></a></li><li class="depth-2"><a href="kvm.volumes.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>volumes</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -238px;"><span class="top" style="height: 247px;"></span><span class="bottom"></span></span><span>physical</span></div></div></li><li class="depth-2 branch"><a href="physical.provider.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>provider</span></div></a></li><li class="depth-2 branch"><a href="physical.validations.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>validations</span></div></a></li><li class="depth-2"><a href="physical.wol.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wol</span></div></a></li><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>re-core</span></div></div></li><li class="depth-2 branch"><a href="re-core.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2 branch"><a href="re-core.config.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>config</span></div></a></li><li class="depth-2 branch"><a href="re-core.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="re-core.launch.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>launch</span></div></a></li><li class="depth-2 branch"><a href="re-core.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2 branch"><a href="re-core.model.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>model</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>persistency</span></div></div></li><li class="depth-3"><a href="re-core.persistency.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>presets</span></div></div></li><li class="depth-3 branch"><a href="re-core.presets.aws.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aws</span></div></a></li><li class="depth-3 branch"><a href="re-core.presets.common.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>common</span></div></a></li><li class="depth-3 branch"><a href="re-core.presets.kvm.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kvm</span></div></a></li><li class="depth-3"><a href="re-core.presets.type.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>type</span></div></a></li><li class="depth-2 branch"><a href="re-core.provider.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>provider</span></div></a></li><li class="depth-2 branch"><a href="re-core.queue.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>queue</span></div></a></li><li class="depth-2 current"><a href="re-core.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-3 branch"><a href="re-core.repl.base.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>base</span></div></a></li><li class="depth-3 branch"><a href="re-core.repl.fixtures.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fixtures</span></div></a></li><li class="depth-3 branch"><a href="re-core.repl.systems.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>systems</span></div></a></li><li class="depth-3"><a href="re-core.repl.types.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>types</span></div></a></li><li class="depth-2 branch"><a href="re-core.schedule.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>schedule</span></div></a></li><li class="depth-2 branch"><a href="re-core.workers.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>workers</span></div></a></li><li class="depth-2"><a href="re-core.workflows.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>workflows</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="re-core.repl.html#var-add"><div class="inner"><span>add</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-by-type"><div class="inner"><span>by-type</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-clear"><div class="inner"><span>clear</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-create"><div class="inner"><span>create</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-destroy"><div class="inner"><span>destroy</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-halt"><div class="inner"><span>halt</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-hosts"><div class="inner"><span>hosts</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-ip"><div class="inner"><span>ip</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-list"><div class="inner"><span>list</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-matching"><div class="inner"><span>matching</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-provision"><div class="inner"><span>provision</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-reload"><div class="inner"><span>reload</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-spice-into"><div class="inner"><span>spice-into</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-ssh-into"><div class="inner"><span>ssh-into</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-start"><div class="inner"><span>start</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-systems"><div class="inner"><span>systems</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-types"><div class="inner"><span>types</span></div></a></li><li class="depth-1"><a href="re-core.repl.html#var-with-ids"><div class="inner"><span>with-ids</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">re-core.repl</h1><div class="doc"><pre class="plaintext">Repl Driven re-core
</pre></div><div class="public anchor" id="var-add"><h3>add</h3><div class="usage"><code>(add base &amp; args)</code></div><div class="doc"><pre class="plaintext">Add existing system instances:
(add (kvm-size 1 512 :openbsd) "furby" :foo); we can specify an os
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L170">view source</a></div></div><div class="public anchor" id="var-by-type"><h3>by-type</h3><div class="usage"><code>(by-type t)</code></div><div class="doc"><pre class="plaintext">get instances by type
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L27">view source</a></div></div><div class="public anchor" id="var-clear"><h3>clear</h3><div class="usage"><code>(clear)</code><code>(clear f)</code><code>(clear f on)</code></div><div class="doc"><pre class="plaintext"> Clear model only (VM won't be deleted):
(clear) ; clear all systems (both runnging and non running)
(clear (by-type :redis)) ; clear systems with redis type
(clear identity :types) ; clear all types
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L55">view source</a></div></div><div class="public anchor" id="var-create"><h3>create</h3><div class="usage"><code>(create base &amp; args)</code></div><div class="doc"><pre class="plaintext">Create instances
(create kvm-small :redis) ; Create a small kvm instance that run redis
(create kvm-small :redis "furry") ; Create a small kvm instance with a hostname
(create kvm-small vol-128G :redis 5) ; Create 5 small redis instances with a 100G Volume
(create kvm-small vol-128G :redis 5 "blurby") ; Each with 100 GB volume
(create puppet src :redis "redis instance type") ; Puppet based type using local src directory </pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L157">view source</a></div></div><div class="public anchor" id="var-destroy"><h3>destroy</h3><div class="usage"><code>(destroy)</code><code>(destroy f)</code><code>(destroy f opts)</code></div><div class="doc"><pre class="plaintext"> Destroy instances (both clear and remove VM):
(destroy) ; remove all instances (both running and non running)
(destroy ip) ; remove running instances only
(destroy (matching "Fstr")) ; remove all instances with an id containing Fstr
(destroy ip {:force true}) ; remove running instances only without confirmation
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L70">view source</a></div></div><div class="public anchor" id="var-halt"><h3>halt</h3><div class="usage"><code>(halt)</code><code>(halt f)</code></div><div class="doc"><pre class="plaintext"> Halt instances:
(halt) ; halt all running (have ip)
(halt (single "foo")) ; halt host foo
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L84">view source</a></div></div><div class="public anchor" id="var-hosts"><h3>hosts</h3><div class="usage"><code>(hosts)</code><code>(hosts f k)</code></div><div class="doc"><pre class="plaintext">Convert systems into re-mote hosts:
(hosts) ; all systems using ip address
(cpu-persist (hosts ip :hostname))) ; use re-gent addresses by grabbing hostname
(hosts (by-type :redis) :hostname) ; all redis instances using hostname
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L119">view source</a></div></div><div class="public anchor" id="var-ip"><h3>ip</h3><div class="usage"><code>(ip [_ {:keys [machine], :as m}])</code></div><div class="doc"><pre class="plaintext">machine has an ip (usually means its running)
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L32">view source</a></div></div><div class="public anchor" id="var-list"><h3>list</h3><div class="usage"><code>(list)</code><code>(list f)</code><code>(list f on)</code></div><div class="doc"><pre class="plaintext">List available instances:
(list) ; list all systems
(list ip) ; list all systems that have an ip (running)
(list identity :types) ; list all types
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L104">view source</a></div></div><div class="public anchor" id="var-matching"><h3>matching</h3><div class="usage"><code>(matching part)</code></div><div class="doc"><pre class="plaintext">Match instances by partial id matching
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L130">view source</a></div></div><div class="public anchor" id="var-provision"><h3>provision</h3><div class="usage"><code>(provision)</code><code>(provision f)</code></div><div class="doc"><pre class="plaintext">Provision VM:
(provision) ; run provision on all running instances
(provision (fn [{:keys [type]] (= type :redis))) ; provision using filter fn</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L135">view source</a></div></div><div class="public anchor" id="var-reload"><h3>reload</h3><div class="usage"><code>(reload)</code><code>(reload f)</code></div><div class="doc"><pre class="plaintext">Reload (stop destroy and up):
(reload) ; reload all running instances
(reload (by-type :redis)) ; reload all redis instances
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L45">view source</a></div></div><div class="public anchor" id="var-spice-into"><h3>spice-into</h3><div class="usage"><code>(spice-into)</code><code>(spice-into f)</code></div><div class="doc"><pre class="plaintext">Open remote spice connection to KVM instances
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L190">view source</a></div></div><div class="public anchor" id="var-ssh-into"><h3>ssh-into</h3><div class="usage"><code>(ssh-into)</code><code>(ssh-into f)</code></div><div class="doc"><pre class="plaintext">SSH into instances (open a terminal)
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L181">view source</a></div></div><div class="public anchor" id="var-start"><h3>start</h3><div class="usage"><code>(start)</code><code>(start f)</code></div><div class="doc"><pre class="plaintext">Start instances:
(start) ; start all without ip (stopped)
(start (by-type :redis)) ; start all redis types
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L94">view source</a></div></div><div class="public anchor" id="var-systems"><h3>systems</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L22">view source</a></div></div><div class="public anchor" id="var-types"><h3>types</h3><div class="usage"></div><div class="doc"><pre class="plaintext"></pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L23">view source</a></div></div><div class="public anchor" id="var-with-ids"><h3>with-ids</h3><div class="usage"><code>(with-ids ids)</code></div><div class="doc"><pre class="plaintext">instances by id
</pre></div><div class="src-link"><a href="https://github.com/re-ops/re-core/blob/master/src/re_core/repl.clj#L37">view source</a></div></div></div></body></html>